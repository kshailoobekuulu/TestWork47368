{"remainingRequest":"/home/kubanychbek/Desktop/code/todo/frontend/test-app/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/kubanychbek/Desktop/code/todo/frontend/test-app/src/components/ToDoModal.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/kubanychbek/Desktop/code/todo/frontend/test-app/src/components/ToDoModal.vue","mtime":1636830104784},{"path":"/home/kubanychbek/Desktop/code/todo/frontend/test-app/node_modules/cache-loader/dist/cjs.js","mtime":1636779947480},{"path":"/home/kubanychbek/Desktop/code/todo/frontend/test-app/node_modules/babel-loader/lib/index.js","mtime":1636779947508},{"path":"/home/kubanychbek/Desktop/code/todo/frontend/test-app/node_modules/cache-loader/dist/cjs.js","mtime":1636779947480},{"path":"/home/kubanychbek/Desktop/code/todo/frontend/test-app/node_modules/vue-loader/lib/index.js","mtime":1636779945775}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyIKCgpleHBvcnQgZGVmYXVsdCh7CiAgICBuYW1lOiAnVG9Eb01vZGFsJywKICAgIHByb3BzOiB7CiAgICAgICAgdGFzazogT2JqZWN0LAogICAgICAgIG9wdGlvbnM6IE9iamVjdCwKICAgICAgICByZXNldERhdGE6IEZ1bmN0aW9uLAogICAgICAgIHRhc2tzOiBBcnJheSwKICAgICAgICB1cGRhdGVUYXNrOiBGdW5jdGlvbiwKICAgIH0sIAogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBlcnJvcnM6IFtdCiAgICAgICAgfQogICAgfSwKICAgIAogICAgbWV0aG9kczogewogICAgICAgIGNyZWF0ZU9yVXBkYXRlVGFzayhidk1vZGFsRXZ0KSB7CiAgICAgICAgICAgIGJ2TW9kYWxFdnQucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5tZXRob2QgPT0gJ3Bvc3QnKSB7CiAgICAgICAgICAgICAgICBheGlvcy5wb3N0KHRoaXMuJGFwaVVybCArIHRoaXMub3B0aW9ucy51cmwsIHRoaXMudGFzaykKICAgICAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09IDIwMSkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRidk1vZGFsLmhpZGUoJ3Rhc2tNb2RhbCcpOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc2V0RGF0YSgpOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRhc2tzLnVuc2hpZnQocmVzcG9uc2UuZGF0YS50b2RvKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lcnJvcnMgPSBbXTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmVycm9ycyA9IFtdOwogICAgICAgICAgICAgICAgICAgIE9iamVjdC52YWx1ZXMoZXJyb3IucmVzcG9uc2UuZGF0YS5lcnJvcnMpLmZvckVhY2goZXJyb3IgPT4gewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVycm9ycy5wdXNoKGVycm9yWzBdKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBheGlvcy5wdXQodGhpcy4kYXBpVXJsICsgdGhpcy5vcHRpb25zLnVybCwgdGhpcy50YXNrKQogICAgICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJGJ2TW9kYWwuaGlkZSgndGFza01vZGFsJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVzZXREYXRhKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVGFzayhyZXNwb25zZS5kYXRhLnRvZG8sIHRoaXMudGFzay5pbmRleCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXJyb3JzID0gW107CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5lcnJvcnMgPSBbXTsKICAgICAgICAgICAgICAgICAgICBPYmplY3QudmFsdWVzKGVycm9yLnJlc3BvbnNlLmRhdGEuZXJyb3JzKS5mb3JFYWNoKGVycm9yID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lcnJvcnMucHVzaChlcnJvclswXSk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgIH0KfSkK"},{"version":3,"sources":["ToDoModal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAgBA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ToDoModal.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <div>\n      <b-modal id=\"taskModal\" :title=\"options.title\" ok-title=\"Submit\" @cancel=\"resetData\" @ok=\"createOrUpdateTask\">\n        <p v-for=\"(error, index) in errors\" :key=\"index\" class=\"alert alert-danger mt-1 mb-1\">{{ error }}</p>\n        <p class=\"my-4\">\n            <input v-model=\"task.title\" type=\"text\" placeholder=\"Title\" class=\"form-control mb-2\">\n            <textarea v-model=\"task.body\" cols=\"10\" rows=\"10\" placeholder=\"Body\" class=\"form-control mt-2 mb-2\"></textarea>\n            <label for=\"date\">Due Date</label>\n            <input v-model=\"task.due_date\" type=\"date\" class=\"form-control\" id=\"date\">\n        </p>\n      </b-modal>\n    </div>    \n  </div>\n</template>\n<script>\nimport axios from \"axios\"\n\n\nexport default({\n    name: 'ToDoModal',\n    props: {\n        task: Object,\n        options: Object,\n        resetData: Function,\n        tasks: Array,\n        updateTask: Function,\n    }, \n    data() {\n        return {\n            errors: []\n        }\n    },\n    \n    methods: {\n        createOrUpdateTask(bvModalEvt) {\n            bvModalEvt.preventDefault();\n            if (this.options.method == 'post') {\n                axios.post(this.$apiUrl + this.options.url, this.task)\n                .then(response => {\n                    if (response.status == 201) {\n                        this.$bvModal.hide('taskModal');\n                        this.resetData();\n                        this.tasks.unshift(response.data.todo);\n                        this.errors = [];\n                    }\n                })\n                .catch(error => {\n                    this.errors = [];\n                    Object.values(error.response.data.errors).forEach(error => {\n                        this.errors.push(error[0]);\n                    });\n                })\n            } else {\n                axios.put(this.$apiUrl + this.options.url, this.task)\n                .then(response => {\n                    if (response.status == 200) {\n                        this.$bvModal.hide('taskModal');\n                        this.resetData();\n                        this.updateTask(response.data.todo, this.task.index);\n                        this.errors = [];\n                    }\n                })\n                .catch(error => {\n                    this.errors = [];\n                    Object.values(error.response.data.errors).forEach(error => {\n                        this.errors.push(error[0]);\n                    });\n                })\n            }\n        },\n    }\n})\n</script>\n"]}]}